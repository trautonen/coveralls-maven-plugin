<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<parent>
		<groupId>org.eluder</groupId>
		<artifactId>eluder-parent</artifactId>
		<version>4</version>
	</parent>
	<groupId>org.eluder.coverage</groupId>
	<artifactId>coverage-sample</artifactId>
	<version>0.0.1-SNAPSHOT</version>

    <profiles>
        <profile>
            <id>saga</id>
            <build>
                <plugins>
                    <plugin>
                        <groupId>com.github.searls</groupId>
                        <artifactId>jasmine-maven-plugin</artifactId>
                        <version>1.3.1.3</version>
                        <executions>
                            <execution>
                                <goals>
                                    <goal>test</goal>
                                </goals>
                            </execution>
                        </executions>
                        <configuration>
                            <jsSrcDir>${project.basedir}/src/main/resources/</jsSrcDir>
                            <jsTestSrcDir>${project.basedir}/src/test/specs</jsTestSrcDir>
                            <keepServerAlive>true</keepServerAlive>
                        </configuration>
                    </plugin>
                    <plugin>
                        <groupId>com.github.timurstrekalov</groupId>
                        <artifactId>saga-maven-plugin</artifactId>
                        <version>1.5.2</version>
                        <executions>
                            <execution>
                                <goals>
                                    <goal>coverage</goal>
                                </goals>
                            </execution>
                        </executions>
                        <configuration>
                            <baseDir>http://localhost:${jasmine.serverPort}</baseDir>
                            <outputDir>${project.build.directory}/saga-coverage</outputDir>
                            <noInstrumentPatterns>
                                <pattern>.*/spec/.*</pattern>
                            </noInstrumentPatterns>
                        </configuration>
                    </plugin>
                    <plugin>
                        <groupId>org.eluder.coveralls</groupId>
                        <artifactId>coveralls-maven-plugin</artifactId>
                        <configuration>
                            <sourceDirectories>
                                <sourceDirectory>${project.build.sourceDirectory}</sourceDirectory>
                                <sourceDirectory>${project.basedir}/src/main/resources/</sourceDirectory>
                            </sourceDirectories>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>

</project>
